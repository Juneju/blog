<!DOCTYPE html>
<html lang="en"><head style="font-family: monospace;">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>博客搭建：Jekyll + Github | June’s blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="博客搭建：Jekyll + Github" />
<meta name="author" content="June" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Jekyll" />
<meta property="og:description" content="Jekyll" />
<link rel="canonical" href="/blog/posts/jekyll/2021/02/23/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA-Jekyll-+-Github.html" />
<meta property="og:url" content="/blog/posts/jekyll/2021/02/23/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA-Jekyll-+-Github.html" />
<meta property="og:site_name" content="June’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-23T10:05:18+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="博客搭建：Jekyll + Github" />
<script type="application/ld+json">
{"description":"Jekyll","url":"/blog/posts/jekyll/2021/02/23/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA-Jekyll-+-Github.html","@type":"BlogPosting","headline":"博客搭建：Jekyll + Github","dateModified":"2021-02-23T10:05:18+00:00","datePublished":"2021-02-23T10:05:18+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/blog/posts/jekyll/2021/02/23/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA-Jekyll-+-Github.html"},"author":{"@type":"Person","name":"June"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/blog/assets/main.css">
    <link rel="stylesheet" href="/blog/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/blog/assets/css/bootstrap-icons.css">
    <link rel="stylesheet" href="/blog/assets/css/gitalk.css"><link type="application/atom+xml" rel="alternate" href="/blog/feed.xml" title="June's blog" /><script async src="https://www.googletagmanager.com/gtag/js?id='G-N9VT95T2YZ'"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'G-N9VT95T2YZ');
</script></head>
<body style="padding-top: 3.5rem;font-family: monospace;"><nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
    <a class="navbar-brand" rel="author" href="/blog/">June&#39;s blog</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav" style="width: 100%;"><ul class="navbar-nav en" style="display: none"><li class="nav-item">
                <a class="nav-link" href="/blog/about/">About </a>
            </li><li class="nav-item">
                <a class="nav-link" href="/blog/archive/">Archive </a>
            </li></ul>
        <ul class="navbar-nav cn" style="display: none"><li class="nav-item">
                <a class="nav-link" href="/blog/about_cn/">关于 </a>
            </li><li class="nav-item">
                <a class="nav-link" href="/blog/archive/">归档 </a>
            </li></ul><div style="width: 100%;">
    <ul class="navbar-nav" style="float:right;">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button"
               data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="bi-globe2">中文</i>
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink" style="font-size: 0.5rem;">
                <a class="dropdown-item drop-active" href="#">中文</a>
                <a class="dropdown-item" href="#">English</a>
            </div>
        </li>
    </ul>
</div></div>
</nav>


<main class="page-content" aria-label="Content">
        <article class="post h-entry postArticle">

    <header class="post-header">
        <h1 class="post-title p-name" itemprop="name headline">博客搭建：Jekyll + Github</h1>
        <p class="post-meta">
            <time class="dt-published" datetime="2021-02-23T10:05:18+00:00" itemprop="datePublished">Feb 23, 2021
            </time></p>
    </header>

    <div>
        <div class="post-content articleBody" itemprop="articleBody">
            <div class="post-container">
                <h2 id="jekyll">Jekyll</h2>

<hr />

<p>Jekyll 是静态网站生成工具。Github Pages可以免费部署Jekyll生成的网站。</p>

<p>本博客是在jekyll minima theme的基础上改造页面样式，增加一些功能点。所以需要在本地环境安装调试Jekyll项目。</p>

<h3 id="安装">安装</h3>

<h4 id="依赖环境">依赖环境</h4>

<ul>
  <li>Ruby version 2.4.0 or higher</li>
  <li>RubyGems</li>
  <li>GCC and Make</li>
</ul>

<h4 id="gem-安装包">gem 安装包</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>jekyll bundler
</code></pre></div></div>

<h4 id="创建项目">创建项目</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jekyll new blog
</code></pre></div></div>

<h4 id="启动项目">启动项目</h4>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve
<span class="c">#配置启动端口</span>
bundle <span class="nb">exec </span>jekyll serve <span class="nt">--port</span> PORT
<span class="c">#配置启动主机</span>
bundle <span class="nb">exec </span>jekyll serve <span class="nt">--host</span> HOSTNAME
</code></pre></div></div>

<h4 id="访问项目">访问项目</h4>

<p>本地项目默认地址是：http://localhost:4000</p>

<p>注：默认ruby gems配置的地址有时候下载速度比较慢，可以改用镜像：https://mirrors.tuna.tsinghua.edu.cn/rubygems/</p>

<p><br /></p>

<h3 id="项目结构">项目结构</h3>

<h4 id="默认主题minima路径">默认主题minima路径</h4>

<p>在项目下(Gemfile所在路径)运行：</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle info <span class="nt">--path</span> minima
</code></pre></div></div>

<h4 id="主题结构">主题结构</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├─assets
├─_includes
├─_layouts
└─_sass 1. _layouts
</code></pre></div></div>

<p>存放页面布局文件。其他文件通过frontMatter声明来使用对应的布局文件。如果需要自定义布局，可以将文件放在此目录下。</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   ├── default.html：所有layouts的基础，通过和 frontMatter声明（layout:default）
   ├── home.html ：index.md或index.html的html布局
   ├── page.html ：除了posts，其余包含frontMatter:page的布局
   └── post.html : 发布的文章的页面布局
</code></pre></div></div>

<ol>
  <li>
    <p>_includes</p>

    <p>存放能够被_layouts注入的文件。</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├── footer.html
├── google-analytics.html
├── head.html
├── header.html
</code></pre></div>    </div>

    <p>注入方式：</p>
    <div class="language-django highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{%</span><span class="o">-</span> <span class="k">include</span> <span class="nv">header.html</span> <span class="o">-</span><span class="cp">%}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>_sass</p>

    <p>存放样式.scss文件。</p>
  </li>
  <li>
    <p>assets</p>

    <p>存放资源文件。main.scss在此文件夹中，在_layouts/default.html 通过 _includes/head.html中引入。</p>
  </li>
</ol>

<h4 id="项目结构-1">项目结构</h4>

<p>除了包含上述的主题结构外，还有以下：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├─_site
├─_posts
├─_plugins
├─_config.yml
└─...
</code></pre></div></div>

<ol>
  <li>
    <p>_site</p>

    <p>项目运行之后，生成的静态网页。</p>
  </li>
  <li>
    <p>_posts</p>

    <p>需要发布的文章在这里面。</p>

    <p>Jekyll规定了post文件命名的格式如下：</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>YEAR-MONTH-DAY-title.MARKUP
​	YEAR：年份，四位数字   
​	MONTH：月份，二位数字  
​	DAY：天，二位数字  
​	MARKUP：文件格式，如md  
</code></pre></div>    </div>

    <p>如果想要给文章添加category，其中一种方法是可以通过文件夹的名称。如下给文章<code class="language-plaintext highlighter-rouge">mysql.md</code>添加了<code class="language-plaintext highlighter-rouge">database</code>的分类：</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>├─posts
	├─database
		├─_posts
			├─mysql.md
</code></pre></div>    </div>
  </li>
  <li>
    <p>_plugins</p>

    <p>用ruby语言编写的插件。具体参考：https://jekyllrb.com/docs/plugins/your-first-plugin/</p>
  </li>
  <li>
    <p>_config.yml</p>

    <p>配置文件存放项目的全局配置，这些配置很少被修改。对于经常需要改变的变量，使用data files。</p>

    <p>在Liquid模板中可以通过<code class="language-plaintext highlighter-rouge">{{ site.xxx }}</code>来获取对应的值。</p>

    <p><br /></p>
  </li>
</ol>

<h3 id="front-matter">Front Matter</h3>

<p>Front Matter 是在文件开头，介于三段虚线之间的YAML片段。</p>

<p>例子：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">layout</span><span class="pi">:</span> <span class="s">default</span>
<span class="na">title</span><span class="pi">:</span> <span class="s">标题</span>
<span class="nn">---</span>
</code></pre></div></div>

<blockquote>
  <p>layout 用于页面嵌入布局中（通过 <code class="language-plaintext highlighter-rouge">{{content}}</code> ）。</p>

  <p>title是页面定义的变量，可以在该页面的Liquid模板中通过<code class="language-plaintext highlighter-rouge">{{ page.title }}</code>使用。</p>
</blockquote>

<p><br /></p>

<h3 id="jekyll-liquid">Jekyll Liquid</h3>

<p>Jekyll 使用 <a href="https://shopify.github.io/liquid/">Liquid</a> 模板语言处理模板。</p>

<p>语言基本上和一般模板语言相同，如变量取值<code class="language-plaintext highlighter-rouge">{{ object }}</code>  , 条件判断<code class="language-plaintext highlighter-rouge">{% if condition %} {% endif %}  </code> 等等。具体可以参考官方文档。</p>

<p><br /></p>

<h2 id="github-部署">GitHub 部署</h2>

<hr />

<p>用GitHub pages部署Jekyll，需要新建一个仓库，然后在仓库的settings中配置GitHub Pages。具体的操作可以参考网上的教程。</p>

<p>想特别提到的一点是：如果使用了自己编写的插件，上传到了_plugins文件夹下，但是部署到线上环境会不生效。原因是Github自动部署的保护机制。所以如果想部署上去，就需要使用Github Actions。具体可以参考：https://jekyllrb.com/docs/continuous-integration/github-actions/#workspace-setup</p>

<p>下面放一下本项目配置的gh-pages.yml：</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Build and deploy Jekyll site to GitHub Pages</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">main</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">github-pages</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">helaili/jekyll-action@2.0.5</span>
        <span class="na">env</span><span class="pi">:</span>
          <span class="na">JEKYLL_PAT</span><span class="pi">:</span> <span class="s">${{ secrets.JEKYLL_PAT }}</span>
</code></pre></div></div>

<p><br /></p>

<h2 id="参考">参考</h2>

<hr />

<p>https://jekyllrb.com/docs/</p>

<p>https://jekyllrb.com/docs/continuous-integration/github-actions/</p>

<p><br /></p>

<h2 id="其他">其他</h2>

<hr />

<p>这篇博客的搭建主要耗时不到一个月，抽出了几天，这几天抽出了几个小时，实际耗时比较短，所以总体搭建下来感觉还是挺简单的。如果不修改Jekyll默认主题，可能只需要几个小时。</p>

<p>最后，既然自己已经搭出来，希望自己能坚持做下去。</p>


            </div>

            <div class="sidebar-container catalog-container sidebar-stick">
                
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#" id="catalog">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
                
            </div>
        </div>
    </div>
    <div id="gitalk-container">

    </div>
</article>
</main><footer class="site-footer h-card">
  <data class="u-url" href="/blog/"></data>

  <div class="wrapper footer-padding">

    <h2 class="footer-heading">June&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div>
        <ul class="contact-list">
          <li class="p-name">June</li>
        </ul>
      </div>
      <div><ul class="social-media-list"><li><a href="https://github.com/Juneju"><svg class="svg-icon"><use xlink:href="/blog/assets/minima-social-icons.svg#github"></use></svg> <span class="username">Juneju</span></a></li></ul>
</div>
      <div>
        <p style="font-size: 0.5rem;">一个人知道自己为什么而活，就可以忍受任何一种生活。</p>
      </div>
    </div>

  </div>

</footer>
<script src="/blog/js/jquery-3.5.1.min.js "></script>
<script src="/blog/js/bootstrap.min.js "></script>
<script src="/blog/js/md5.min.js "></script>
<script type="module" src="/blog/js/utils.js "></script>
<script type="module" src="/blog/js/header.js "></script>
<script src="/blog/js/gitalk.min.js "></script>
<script type="module" src="/blog/js/comment.js "></script>
<script type="module" src="/blog/js/siderBar.js "></script>
<!--<script type="module" src="/blog/js/jquery.nav.j
s "></script>-->
</body>
</html>
